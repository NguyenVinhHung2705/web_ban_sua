{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gi·ªè h√†ng</title>
  <link rel="stylesheet" href="{% static 'css/home.css' %}">
</head>
<body>

<header class="header">
  <div class="header-inner">
    <a class="logo" href="{% url 'dashboard' %}">
      <span class="logo-badge">M</span><span>MilkStore</span>
    </a>

    <div class="actions">
      <a class="cart" href="{% url 'to_view_cart' %}">
        üõí Gi·ªè h√†ng <span class="badge">{{ total_cart_item|default:0 }}</span>
      </a>
      <a class="btn secondary" href="{% url 'dashboard' %}">Ti·∫øp t·ª•c mua</a>
    </div>
  </div>
</header>

<main class="wrap">
  <h2 style="margin: 10px 0 12px;">Gi·ªè h√†ng</h2>

  {% if cart_items %}
    <div class="grid" style="grid-template-columns: 1fr; gap:12px;">
      {% for item in cart_items %}
        <div class="card" style="display:flex; gap:12px; align-items:center;">
          <div style="width:90px; height:90px; border-radius:12px; overflow:hidden; border:1px solid rgba(15,23,42,.10); background:#fff;">
            <img src="{{ item.product.image.url }}" style="width:100%; height:100%; object-fit:cover;">
          </div>

          <div style="flex:1;">
            <div style="font-weight:900;">{{ item.product.product_name }}</div>
            <div style="color:var(--muted); font-size:13px;">{{ item.product.category.category_name }}</div>

            <div style="margin-top:6px; display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
              <span>Gi√°: <b>{{ item.product.price }}</b></span>
              <span>T·∫°m t√≠nh: <b>{{ item.subtotal }}</b></span>

              <div style="margin-left:auto; display:flex; gap:8px; align-items:center;">
                <a class="btn secondary" href="{% url 'cart_dec' item.product.product_id %}">‚àí</a>
                <b style="min-width:24px; text-align:center;">{{ item.quantity }}</b>
                <a class="btn secondary" href="{% url 'cart_inc' item.product.product_id %}">+</a>
                <a class="btn" style="border-color: rgba(239,68,68,.25); color:#b91c1c;"
                   href="{% url 'cart_remove' item.product.product_id %}">
                  X√≥a
                </a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="card" style="margin-top:14px; display:flex; justify-content:space-between; align-items:center;">
      <div>
        <div style="color:var(--muted); font-size:13px;">T·ªïng ti·ªÅn</div>
        <div style="font-size:20px; font-weight:900;">{{ cart_total }} ƒë</div>
      </div>
      <a class="btn primary" href="{% url 'checkout' %}">Thanh to√°n</a>
    </div>

  {% else %}
    <p style="color:var(--muted);">Gi·ªè h√†ng tr·ªëng.</p>
  {% endif %}
</main>

</body>
</html>
