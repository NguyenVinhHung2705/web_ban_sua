{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - S·∫£n ph·∫©m</title>

  <!-- CSS ri√™ng cho trang products -->
  <link rel="stylesheet" href="{% static 'css/admin_products.css' %}">
</head>

<body>
  <div class="wrap">

    <!-- ===== HEADER ===== -->
    <div class="top">
      <div>
        <h1 class="title">Qu·∫£n l√Ω s·∫£n ph·∫©m</h1>

        <!-- account c√≥ th·ªÉ null => check tr∆∞·ªõc -->
        <p class="sub">
          Xin ch√†o:
          {% if account %}
            <b>{{ account.username }}</b>
          {% else %}
            <b>(·∫©n danh)</b>
          {% endif %}
        </p>
      </div>

      <!-- Nh√≥m n√∫t ƒëi·ªÅu h∆∞·ªõng -->
      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <a class="btn secondary" href="{% url 'dashboard' %}">üè† Trang ch·ªß</a>
        <a class="btn primary" href="{% url 'admin_product_create' %}">+ Th√™m s·∫£n ph·∫©m</a>
      </div>
    </div>

    <!-- ===== LIST PRODUCTS ===== -->
    <div class="product-grid">

      {% for p in products %}
        <div class="product-card">

          <!-- ·∫¢nh s·∫£n ph·∫©m: c·∫ßn fallback ƒë·ªÉ tr√°nh l·ªói n·∫øu p.image r·ªóng -->
          <div class="product-img">
            {% if p.image %}
              <img src="{{ p.image.url }}" alt="{{ p.product_name }}">
            {% else %}
              <!-- Kh√¥ng c√≥ ·∫£nh -->
              <div style="width:100%; height:100%; display:grid; place-items:center; color:var(--muted);">
                No image
              </div>
            {% endif %}
          </div>

          <!-- T√™n -->
          <div class="product-name">{{ p.product_name }}</div>

          <!-- Gi√° + Danh m·ª•c -->
          <div class="product-meta">
            <div class="product-price">{{ p.price }} ƒë</div>

            <!-- category c√≥ th·ªÉ null => fallback -->
            <div class="product-cat">
              {% if p.category %}
                {{ p.category.category_name }}
              {% else %}
                (Ch∆∞a c√≥ danh m·ª•c)
              {% endif %}
            </div>
          </div>

          <!-- M√¥ t·∫£: d√πng default ƒë·ªÉ tr√°nh hi·ªÉn th·ªã "None" -->
          <div class="product-desc">
            {{ p.description|default:"(Ch∆∞a c√≥ m√¥ t·∫£)" }}
          </div>

          {# N·∫øu b·∫°n mu·ªën th√™m n√∫t S·ª≠a/X√≥a t·∫°i ƒë√¢y th√¨ m√¨nh gh√©p v√†o block actions #}
          {# <div class="product-actions"> ... </div> #}
        </div>

      {% empty %}
        <p style="color:var(--muted);">
          Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o. B·∫•m ‚ÄúTh√™m s·∫£n ph·∫©m‚Äù ƒë·ªÉ t·∫°o.
        </p>
      {% endfor %}

    </div>
  </div>
</body>
</html>
