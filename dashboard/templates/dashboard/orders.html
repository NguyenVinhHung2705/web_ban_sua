{% load static %}
{% load tz %}
{% load formatters %}

<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ÄÆ¡n hÃ ng</title>
  <link rel="stylesheet" href="{% static 'css/home.css' %}">
</head>
<body>

<!-- =========================
     HEADER
     ========================= -->
<header class="header">
  <div class="header-inner">
    <a class="logo" href="{% url 'dashboard' %}">
      <span class="logo-badge">M</span><span>MilkStore</span>
    </a>

    <div class="actions">
      <a class="cart" href="{% url 'to_view_cart' %}">
        ğŸ›’ Giá» hÃ ng <span class="badge">{{ total_cart_item|default:0 }}</span>
      </a>
      <a class="btn secondary" href="{% url 'dashboard' %}">Trang chá»§</a>
    </div>
  </div>
</header>

<main class="wrap">
  <h2 style="margin:10px 0 12px;">Lá»‹ch sá»­ Ä‘Æ¡n hÃ ng</h2>

  <!-- =========================
       LIST ORDERS
       orders Ä‘Æ°á»£c truyá»n tá»« view
       ========================= -->
  {% if orders %}
    <div class="grid" style="grid-template-columns:1fr; gap:12px;">

      {% for o in orders %}
        <!-- Má»—i Ä‘Æ¡n lÃ  1 card link sang trang chi tiáº¿t -->
        <a
          class="card"
          href="{% url 'order_detail' o.order_id %}"
          style="display:block;"
          aria-label="Xem chi tiáº¿t Ä‘Æ¡n {{ o.order_id }}"
        >
          <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">

            <!-- LEFT: mÃ£ Ä‘Æ¡n + thá»i gian -->
            <div>
              <div style="font-weight:900;">ÄÆ¡n #{{ o.order_id }}</div>
              <div style="color:var(--muted); font-size:13px;">
                {{ o.created_at|localtime|date:"d/m/Y H:i" }}
              </div>
            </div>

            <!-- RIGHT: tá»•ng tiá»n + tráº¡ng thÃ¡i -->
            <div style="text-align:right;">
              <div style="font-weight:900;">
                {{ o.total_amount|vnd }}
              </div>
              <div style="color:var(--muted); font-size:13px;">
                {{ o.status }}
              </div>
            </div>

          </div>
        </a>
      {% endfor %}

    </div>
  {% else %}
    <!-- KhÃ´ng cÃ³ Ä‘Æ¡n -->
    <p style="color:var(--muted);">ChÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o.</p>
  {% endif %}
</main>

</body>
</html>
