{% load static %}
{% load formatters %}

<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>N·∫°p v√≠</title>
  <link rel="stylesheet" href="{% static 'css/home.css' %}">
</head>
<body>

<!-- =========================
     HEADER
     ========================= -->
<header class="header">
  <div class="header-inner">
    <a class="logo" href="{% url 'dashboard' %}">
      <span class="logo-badge">M</span><span>MilkStore</span>
    </a>

    <div class="actions">
      <a class="cart" href="{% url 'to_view_cart' %}">
        üõí Gi·ªè h√†ng <span class="badge">{{ total_cart_item|default:0 }}</span>
      </a>
      <a class="btn secondary" href="{% url 'dashboard' %}">Trang ch·ªß</a>
    </div>
  </div>
</header>

<main class="wrap">
  <h2 style="margin: 10px 0 12px;">N·∫°p v√≠ (Demo)</h2>

  <!-- =========================
       ERROR MESSAGE
       ========================= -->
  {% if error_message %}
    <div class="card" style="border:1px solid rgba(239,68,68,.25); background:rgba(239,68,68,.06); color:#991b1b;">
      {{ error_message }}
    </div>
  {% endif %}

  <!-- =========================
       WALLET INFO + TOPUP FORM
       ========================= -->
  <div class="card">

    <!-- Th√¥ng tin ng∆∞·ªùi d√πng + s·ªë d∆∞ -->
    <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">
      <div>
        <div style="color:var(--muted); font-size:13px;">Ng∆∞·ªùi d√πng</div>
        <div style="font-weight:900;">{{ account.username }}</div>
      </div>

      <div style="text-align:right;">
        <div style="color:var(--muted); font-size:13px;">S·ªë d∆∞ hi·ªán t·∫°i</div>
        <!-- Format ti·ªÅn: d√πng filter vnd -->
        <div style="font-weight:900; font-size:18px;">{{ balance|vnd }}</div>
      </div>
    </div>

    <!-- Form n·∫°p ti·ªÅn: POST + CSRF -->
    <form method="post"
          style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
      {% csrf_token %}

      <div style="flex:1; min-width:240px;">
        <label for="amount" style="display:block; color:var(--muted); font-size:13px; margin-bottom:6px;">
          S·ªë ti·ªÅn n·∫°p
        </label>

        <input
          id="amount"
          type="number"
          name="amount"
          step="0.01"
          min="0"
          placeholder="Nh·∫≠p s·ªë ti·ªÅn (vd: 500000)"
          style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(15,23,42,.12);"
          required
        >
      </div>

      <button class="btn primary" type="submit">N·∫°p</button>
      <a class="btn secondary" href="{% url 'dashboard' %}">H·ªßy</a>
    </form>

    <!-- Note: demo -->
    <div style="margin-top:10px; color:var(--muted); font-size:13px;">
      * ƒê√¢y l√† ch·ª©c nƒÉng demo ƒë·ªÉ test thanh to√°n.
    </div>
  </div>
</main>

</body>
</html>
