{% load static %}
{% load formatters %}
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thanh to√°n</title>
  <link rel="stylesheet" href="{% static 'css/home.css' %}">
</head>
<body>

<header class="header">
  <div class="header-inner">
    <!-- Logo v·ªÅ trang ch·ªß -->
    <a class="logo" href="{% url 'dashboard' %}">
      <span class="logo-badge">M</span><span>MilkStore</span>
    </a>

    <!-- Nh√≥m n√∫t ƒëi·ªÅu h∆∞·ªõng -->
    <div class="actions">
      <a class="cart" href="{% url 'to_view_cart' %}">
        üõí Gi·ªè h√†ng <span class="badge">{{ total_cart_item|default:0 }}</span>
      </a>
      <a class="btn secondary" href="{% url 'my_orders' %}">ƒê∆°n h√†ng</a>
    </div>
  </div>
</header>

<main class="wrap">

  <h2 style="margin:10px 0 12px;">X√°c nh·∫≠n thanh to√°n</h2>

  <!-- Form x√°c nh·∫≠n thanh to√°n: POST + CSRF -->
  <form method="post" style="display:grid; gap:12px;" autocomplete="off">
    {% csrf_token %}

    <!-- ===== TH√îNG TIN NG∆Ø·ªúI NH·∫¨N ===== -->
    <div style="margin-top:4px; display:grid; gap:10px;">

      <div>
        <label for="receiver_name" style="color:var(--muted); font-size:13px;">H·ªç v√† t√™n</label>
        <input
          id="receiver_name"
          name="receiver_name"
          required
          value="{{ receiver_name|default:'' }}"
          style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(15,23,42,.12);"
        />
      </div>

      <div>
        <label for="receiver_phone" style="color:var(--muted); font-size:13px;">S·ªë ƒëi·ªán tho·∫°i</label>
        <!-- type=tel ƒë·ªÉ h·ª£p v·ªõi d·ªØ li·ªáu s·ªë ƒëi·ªán tho·∫°i -->
        <input
          id="receiver_phone"
          type="tel"
          name="receiver_phone"
          required
          value="{{ receiver_phone|default:'' }}"
          style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(15,23,42,.12);"
        />
      </div>

      <div>
        <label for="receiver_address" style="color:var(--muted); font-size:13px;">ƒê·ªãa ch·ªâ giao h√†ng</label>
        <input
          id="receiver_address"
          name="receiver_address"
          required
          value="{{ receiver_address|default:'' }}"
          style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(15,23,42,.12);"
        />
      </div>

    </div>

    <!-- ===== ERROR MESSAGE (n·∫øu c√≥) ===== -->
    {% if error_message %}
      <div class="card" style="border:1px solid rgba(239,68,68,.25); background:rgba(239,68,68,.06); color:#991b1b;">
        {{ error_message }}
      </div>
    {% endif %}

    <!-- ===== SUMMARY: WALLET + TOTAL ===== -->
    <div class="card">
      <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">

        <div>
          <div style="color:var(--muted); font-size:13px;">S·ªë d∆∞ v√≠</div>
          <!-- balance ƒë∆∞·ª£c format b·∫±ng filter vnd -->
          <div style="font-weight:900; font-size:18px;">{{ balance|vnd }}</div>
        </div>

        <div>
          <div style="color:var(--muted); font-size:13px;">T·ªïng thanh to√°n</div>
          <div style="font-weight:900; font-size:18px;">{{ cart_total|vnd }}</div>
        </div>

      </div>

      <!-- Actions -->
      <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn primary" type="submit">X√°c nh·∫≠n thanh to√°n</button>
        <a class="btn secondary" href="{% url 'to_view_cart' %}">Quay l·∫°i gi·ªè</a>
      </div>
    </div>

  </form>
</main>

</body>
</html>
